workflows:
  android_ios_build:
    name: Build Android & iOS (test)
    max_build_duration: 60

    environment:
      flutter: stable

    scripts:
  - name: Get dependencies
    script: flutter pub get

  - name: Generate localization
    script: flutter gen-l10n

  - name: Build Android
    script: flutter build apk --release

  - name: Build iOS
    script: flutter build ios --release --no-codesign

    artifacts:
      - build/app/outputs/flutter-apk/*.apk
      - build/ios/iphoneos/*.app